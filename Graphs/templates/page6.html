<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>GHC</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600">
    <link rel="stylesheet" href="../static/css/css/fontawesome.min.css">
    <link rel="stylesheet" href="../static/css/css/fullcalendar.min.css">
    <link rel="stylesheet" href="../static/css/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/css/tooplate.css">
    <link rel="stylesheet" href="../static/css/css/styling.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

</head>

<style> /* set the CSS */

  
        .bar { 
          fill:#95CEFF;
       
          }
        .line {
          fill: none;
          /* stroke: steelblue; */
          stroke:#FF3D67;
          stroke-width: 2px;
          }
        .toolTip {
          position: absolute;
          display: none;
          min-width: 80px;
          height: auto;
          background: none repeat scroll 0 0 #ffffff;
          border: 1px solid #6F257F;
          padding: 14px;
          text-align: center;
         }
 

/* 
.y_tick line{
  visibility:hidden;
} */
.legend{
  stroke-width:4px;
}
        </style>
        
<body id="reportsPage" >
    <div class="" id="home">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="navbar navbar-expand-xl navbar-light bg-light" style="position: fixed;width:100%;top:0;left:0;z-index:1;">
                        <a class="navbar-brand" href="#">
                            <!-- <i class="fas fa-3x fa-tachometer-alt tm-site-icon"></i> -->
                            <img src="../static/images/ghclogo.png" height=70 width=70>
                            <h1 class="tm-site-title mb-0">GHC</h1>
                        </a>
                        <button class="navbar-toggler ml-auto mr-0" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
            
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav mx-auto">
                                <li class="nav-item">
                                    <a class="nav-link " href="{% url 'chatbot'%}"> Chatterbot
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link " href="{% url 'firstpage'%}">Portfolio Overview
                                        <span class="sr-only">(current)</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <li class="nav-item">
                                        <a class="nav-link "  href="{% url 'secondpage'%}">Net Exposure
                                           
                                        </a>
                                    </li>
                                   
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{% url 'thirdpage'%}">Factor Contribution</a>
                                </li>

                                <li class="nav-item">
                                    <a class="nav-link"  href="{% url 'fourthpage'%}">Gross Exposure and PnL</a>
                                </li>
                                <li class="nav-item ">
                                    <a class="nav-link"  href="{% url 'fifthpage'%}">Value at Risk</a>
                    
                                </li>
                                <li class="nav-item ">
                                    <a class="nav-link active" href="{% url 'sixthpage'%}">Excess, Vol and Return Disturbution</a>
                    
                                </li>
                            </ul>
                            <ul class="navbar-nav">
                                <li class="nav-item">
                                    <a class="nav-link d-flex" href="{% url 'logout'%}">
                                        <!-- <i class="far fa-user mr-2 tm-logout-icon"></i> -->
                                        <span>Logout<i style="font-size:24px" class="fa">&#xf08b;</i></span>
                            
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
            
            <div class="row tm-content-row tm-mt-big" style="margin-top:100px">

                <div class="tm-col tm-col-big">
                        <div class="bg-white tm-block h-100">
                            <h2 class="tm-block-title">Benchmark vs Fund Returns</h2>
                            <div id="my_dataviz">
                              <div id="legend">

                              </div>
                            </div>


                            <script src="https://d3js.org/d3.v4.js"></script>



                            <script>
                            
                              // set the dimensions and margins of the graph
                              var margin = {top: 15, right: 30, bottom: 100, left: 80},
                                  width = 550 ,
                                  height = 350 ;
                              
                              // append the svg object to the body of the page
                              var svg3 = d3.select("#my_dataviz")
                                .append("svg").attr("viewBox", [0, 0, width+150, height+100])
                                .append("g")
                                  .attr("transform",
                                        "translate(" + margin.left + "," + margin.top + ")");
                                        
                              // Parse the Data
                              d3.csv("../static/csv/page6_Fund_benchmark_return.csv", function(data) {
                            
                              
                                var parseDate = d3.timeParse("%Y-%m-%d");
                            
                                  
                                data.forEach(function(d) {
                                  d.Benchmarkreturn=(+d.Benchmarkreturn)*100;
                                  d.Return=(+d.Return)*100;
                                d[0] = parseDate(d[0]);
                                // console.log(typeof(d[0]))
                            });
                              // X axis
                                                    
                              function getDate(d) {
                                return new Date(d.Date);
                            }
                            
                            var minDate = getDate(data[0]),
                                maxDate = getDate(data[data.length-1]);
                            
                              var x = d3.scaleTime()
                                .range([ 0, width ])
                                .domain([minDate, maxDate]) 
                                
                              svg3.append("g")
                                .attr("transform", "translate(0," + height + ")")
                                .call(d3.axisBottom(x).tickFormat(d3.timeFormat("%b-%y")))
                                .selectAll("text")
                                .attr("transform", "translate(-10,0)rotate(-45)")
                                .style("text-anchor", "end");
                              
                              // //  adding y-axis label
                              svg3.append("text")      // text label for the x axis
                                .attr("x", -200)
                                .attr("y",  -50 )
                                .style("text-anchor", "middle")
                                .style("font-size", "12px")
                                // .style("font-family","verdana")
                                .attr("transform", "rotate(-90)")
                                .text("Fund (%)");

                              // Add Y axis
                              var y = d3.scaleLinear()
                                .domain([-10, 10])
                                .range([ height, 0]);
                              svg3.append("g")
                                .call(d3.axisLeft(y).tickFormat(d =>d.toFixed(1)+"%"));
                              
                              // Lines
                              svg3.selectAll("myline")
                                .data(data)
                                .enter()
                                .append("line")
                                  .attr("x1", function(d) { return x(getDate(d)); })
                                  .attr("x2", function(d) { return x(getDate(d)); })
                                  .attr("y1", function(d) { return y(d.Benchmarkreturn); })
                                  .attr("y2",  function(d) { return y(d.Return); })
                                  .attr("stroke", function(d){ return d.Benchmarkreturn <= d.Return ? '#999EFF' : '#FC7599' })
                                  .attr("stroke-width", "1px")
                              var tooltip = d3.select("#my_dataviz").append("div").attr("class", "toolTip");
                              // Circles



                          var colors = ["#999EFF", "#FC7599"];
                  
                            var data_1 = ['Benchmark','Fund'];

                              var svg_3 = d3.select('#my_dataviz')
                              .append('svg')
                              .attr("viewBox", [0, 0, width+220, 20])  
                              
                              var groups = svg_3.selectAll('g')
                              .data(data_1)
                              .enter()
                              .append('g');
                              

                              var line=groups.append("line").attr("x1",300).attr("x2",313).attr("y1",5).attr("class","legend")
                              .attr("y2",5).attr('stroke',function(d,i) { return colors[i];})

                              var text = groups.append('text')
                              .attr('y', 10)
                              .attr('x',314).style("font-size","14px")
                              .text(function(d) { return d; });
                              
                              // Now space the groups out after they have been appended:
                              var padding = 40;
                              groups.attr('transform', function(d,i) { 
                              return "translate("+(d3.sum(data, function(e,j) {
                                  if (j < i) { return groups.nodes()[j].getBBox().width; } else return 0; }) + padding * i) + ",0)";
                              })
                      
                              svg3.selectAll("mycircle")
                                  .data(data)
                                  .enter()
                                  .append("circle")
                                  .attr("cx", function(d) { return x(getDate(d)); })
                                  .attr("cy", function(d) { return y(d.Benchmarkreturn); })
                                  .attr("r", "5")
                                  .style("fill", "#FC7599")
                                  .on("mouseover", function(d){
                                      tooltip
                                        .style("left", d3.event.pageX - 50 + "px")
                                        .style("top", d3.event.pageY - 60 + "px")
                                        .style("display", "inline-block")
                                        .html("Benchmark: "+(d.Benchmarkreturn).toFixed(2)+"%"+"<br>Fund: "+(d.Return).toFixed(2)+"%");
                                  })
                                  .on("mouseout", function(d){ tooltip.style("display", "none");});;
                                  // .attr("stroke", "black")
                            
                            
                                  svg3.selectAll("mycircle")
                                      .data(data)
                                      .enter()
                                      .append("circle")
                                      .attr("cx", function(d) { return x(getDate(d)); })
                                      .attr("cy", function(d) { return y(d.Return); })
                                      .attr("r", "5")
                                      .style("fill", "#999EFF")
                                      .on("mouseover", function(d){
                                          tooltip
                                            .style("left", d3.event.pageX - 50 + "px")
                                            .style("top", d3.event.pageY - 60 + "px")
                                            .style("display", "inline-block")
                                            .html("Benchmark: "+(d.Benchmarkreturn).toFixed(2)+"%"+"<br>Fund: "+(d.Return).toFixed(2)+"%");
                                      })
                                      .on("mouseout", function(d){ tooltip.style("display", "none")});
                                  // .attr("stroke", "black")
                            
                              })
                              

                              
                              
                              
                              </script>

                        </div>
                </div>


                <div class="tm-col tm-col-big">
                                <div class="bg-white tm-block h-100 centered  ">
                                    <h2 class="tm-block-title">Frequency Distribution - Trailing 2 Years</h2>
                                    <div id="c1"></div>
                                    <script src="//d3js.org/d3.v4.min.js"></script>
                                    <script>
                                    
                                    // set the dimensions and margins of the graph
                                    var margin = {top: 15, right: 0, bottom: 40, left: 80},
                                        width = 550 ,
                                        height = 380 ;
                                    
                                    // set the ranges
                                    var x = d3.scaleBand()
                                    .range([50,50])
                                              // .range([0, width],3.5)
                                              // .padding(0.1);
                                    var y = d3.scaleLinear()
                                              .range([height, 0]);
                                    var tooltip = d3.select("#c1").append("div").attr("class", "toolTip");   


                                    // append the svg object to the body of the page
                                    // append a 'group' element to 'svg'
                                    // moves the 'group' element to the top left margin
                                    var svg = d3.select("#c1")
                                                .append("svg")
                                                .attr("viewBox", [0, 0, width+150, height+100])
                                                .append("g")
                                                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
                                    
                                    // get the data
                                    d3.csv("../static/csv/frequency_dist_T2years.csv", function(error, data) {
                                      if (error) throw error;
                                    
                                      // format the data
                                      data.forEach(function(d) {
                                        d.Frequency = +d.Frequency;
                                      });
                                    
                                      // Scale the range of the data in the domains
                                      x.domain(data.map(function(d) { return d.Category; }));
                                      y.domain([0, d3.max(data, function(d) { return d.Frequency; })]);
                                    
                                      // append the rectangles for the bar chart
                                      svg.selectAll(".bar")
                                          .data(data)
                                        .enter().append("rect")
                                          .attr("class", "bar")
                                          .attr("x", function(d) { return x(d.Category)+22; })
                                          .attr("width", x.bandwidth()-50)
                                          .attr("y", function(d) { return y(d.Frequency); })
                                          .attr("height", function(d) { return height - y(d.Frequency); })
                                          // .attr('transform', 'translate(400,450')
                                          .on("mouseover", function(d){
                                                tooltip
                                                  .style("left", d3.event.pageX - 50 + "px")
                                                  .style("top", d3.event.pageY - 100 + "px")
                                                  .style("display", "inline-block")
                                                  .html("Category: "+(d.Category) + "<br>Frequency: "+ (d.Frequency));
                                            })
                                            .on("mouseout", function(d){ tooltip.style("display", "none");});;;
                                    
                                      // add the x Axis
                                      svg.append("g")
                                          .attr("transform", "translate(0," + height + ")")
                                          .call(d3.axisBottom(x).ticks(5).tickSizeOuter(0)) .selectAll("text").style("font-family","verdana")
                                          .attr("transform", "translate(30,0)rotate(0)")
                                          .style("text-anchor", "end");;
                                    
                                    //adding x-axis label
                                    svg.append("text")             
                                        .attr("transform","translate(" + (width/2) + " ," + (height + 60) + ")")
                                        .style("text-anchor", "middle")
                                        .style("font-size","13")
                                        .text("Return Buckets");
                                    
                                      // add the y Axis
                                      svg.append("g")
                                          .call(d3.axisLeft(y));
                                    
                                          
                                      //adding label to y-axis
                                          svg.append("text")      // text label for the x axis
                                            .attr("x",-200 )
                                            .attr("y",-50)
                                            .style("text-anchor", "middle")
                                            .style("font-size", "13px")
                                            .text("Number of Months").attr("transform", "rotate(-90)");
                                            svg.selectAll("text.bar")  		
                                        .data(data)
                                        .enter()
                                        .append("text")
                                        .attr("class","label")
                                        .attr("text-anchor", "start")
                                        .attr("x", (function(d) { return x(d.Category)+40; }  ))
                                        .attr("y", function(d) { return y(d.Frequency)-15; })
                                        .attr("dy", ".75em")
                                        .text(function(d) { return d.Frequency; }); 
                                  
                                        
                                    
                                    });
                                    
                                    </script>
                                </div>
                </div>


                <div class="tm-col tm-col-big">
                    <div class="bg-white tm-block h-100 centered  ">
                        <h2 class="tm-block-title">Volatility Evolution</h2>
                        <div id="divline2"></div>
                        <div id="divline1"></div>
                        
                        <!-- load the d3.js library -->    	
                        <script src="https://d3js.org/d3.v4.min.js"></script>
                     

                       <script>
                        //Annl_Vol_T12M
                        // set the dimensions and margins of the graph
                        var margin = {top: 25, right: 30, bottom: 0 , left: 75},
                            width = 550,
                            height = 380;
                        
                        // parse the date / time
                        var parseTime1 = d3.timeParse("%d-%b-%y");
                        var formatTime = d3.timeFormat("%b %d %Y");
                        // set the ranges
                        var x = d3.scaleTime().range([0, width]);
                        var y = d3.scaleLinear().range([height, 0]);
                        
                        // define the 1st line
                        var valueline = d3.line()
                            .x(function(d) { return x(d.date); })
                            .y(function(d) { return y(d.annual_downside); });
                        
                        // define the 2nd line
                        var valueline2 = d3.line()
                            .x(function(d) { return x(d.date); })
                            .y(function(d) { return y(d.annual_upside); });
                          
                          var valueline3 = d3.line()
                            .x(function(d) { return x(d.date); })
                            .y(function(d) { return y(d.Annl_Vol_T12M); });
                          
                        // append the svg obgect to the body of the page
                        // appends a 'group' element to 'svg'
                        // moves the 'group' element to the top left margin
                        var svg4 = d3.select("#divline2").append("svg")
                                    .attr("viewBox", [0, 0,width+150, height+100])
                                    .append("g")
                                      .attr("transform",
                                            "translate(" + margin.left + "," + margin.top+ ")");
                        
                        // Get the data
               
                          // format the data
                        data4={{data4|safe}}
                          data4.forEach(function(d) {
                              d.date = parseTime1(d.date);
                            // d.date=d.date
                              d.annual_downside =(+d.annual_downside)*100;
                              d.annual_upside =(+d.annual_upside)*100;
                              d.Annl_Vol_T12M =(+d.Annl_Vol_T12M)*100;
                          });
                          var tooltip = d3.select("#divline2").append("div").attr("class", "toolTip");
                        
                  

                          // Scale the range of the data
                          x.domain([d3.min(data4, function(d) { return d.date }), d3.max(data4, function(d) { return d.date; })]);

                          y.domain([0, d3.max(data4, function(d) {
                              return Math.max(d.annual_downside, d.annual_upside); })]).nice();
                        
                          // Add the valueline path.
                          svg4.append("path")
                              .data([data4])
                              .attr("class", "line")
                              .attr("d", valueline).style("stroke","#FC7599");
                              svg4.selectAll("dot")
                                .data(data4)
                                .enter().append("circle")
                                .attr("r", 2)
                                .style("fill", "transparent")  
                                .attr("cx", function(d) { return x(d.date); })
                                .attr("cy", function(d) { return y(d.annual_downside)}) 
                              .on("mouseover", function(d){
                                    tooltip.transition()		
                                    .duration(200)		
                                            .style("left", d3.event.pageX - 50 + "px")
                                            .style("top", d3.event.pageY - 150 + "px")
                                            .style("display", "inline-block")   
                                            tooltip.html("Date : "+formatTime(d.date)+ "<br/>Ann'l Vol(T12) : $"  + d.Annl_Vol_T12M.toFixed(2) +"<br/>Ann'l Vol Upside : $"  + d.annual_upside.toFixed(2)+"<br/>Ann'l Vol Downside : $"  + d.annual_downside.toFixed(2));

                                      })
                                      .on("mouseout", function(){
                                    tooltip.style("display","none")
                                });
                        
                          // Add the valueline2 path.
                          svg4.append("path")
                              .data([data4])
                              .attr("class", "line").style("stroke","#999EFF")
                              // .style("stroke", "steelblue")
                              .attr("d", valueline2) ;
                              svg4.selectAll("dot")
                                .data(data4)
                                .enter().append("circle")
                                .attr("r", 2)
                                .style("fill", "transparent")  
                                .attr("cx", function(d) { return x(d.date); })
                                .attr("cy", function(d) { return y(d.annual_upside)}) 
                                .on("mouseover", function(d){
                                    tooltip.transition()		
                                    .duration(200)		
                                            .style("left", d3.event.pageX - 50 + "px")
                                            .style("top", d3.event.pageY - 150 + "px")
                                            .style("display", "inline-block")   
                                            tooltip.html("Date : "+formatTime(d.date)+ "<br/>Ann'l Vol(T12) : $"  + d.Annl_Vol_T12M.toFixed(2) +"<br/>Ann'l Vol Upside : $"  + d.annual_upside.toFixed(2)+"<br/>Ann'l Vol Downside : $"  + d.annual_downside.toFixed(2));

                                      })
                                      .on("mouseout", function(){
                                    tooltip.style("display","none")
                                });
                        // //add the valueline3 path
                        svg4.append("path")
                              .data([data4])
                              .attr("class", "line")
                              .attr("d", valueline3).style("stroke","orange").style("stroke-width","3px");
                              
                              svg4.selectAll("dot")
                                .data(data4)
                                .enter().append("circle")
                                .attr("r", 2)
                                .style("fill", "transparent")  
                                .attr("cx", function(d) { return x(d.date); })
                                .attr("cy", function(d) { return y(d.Annl_Vol_T12M)}) 
                                .on("mouseover", function(d){
                                    tooltip.transition()		
                                    .duration(200)		
                                            .style("left", d3.event.pageX - 50 + "px")
                                            .style("top", d3.event.pageY - 150 + "px")
                                            .style("display", "inline-block")   
                                            tooltip.html("Date : "+formatTime(d.date)+ "<br/>Ann'l Vol(T12) : $"  + d.Annl_Vol_T12M.toFixed(2) +"<br/>Ann'l Vol Upside : $"  + d.annual_upside.toFixed(2)+"<br/>Ann'l Vol Downside : $"  + d.annual_downside.toFixed(2));

                                      })
                                      .on("mouseout", function(){
                                    tooltip.style("display","none")
                                });
                        
                          // Add the X Axis
                          svg4.append("g")
                              .attr("transform", "translate(0," + height + ")").attr("class","y_tick")
                              .call(d3.axisBottom(x).tickPadding(7).ticks(10).tickFormat(d3.timeFormat("%b-%y")).tickSizeOuter(0)).selectAll("text")
                                .attr("transform", "translate(-10,0)rotate(-45)")
                                .style("text-anchor", "end");
                        
                          // Add the Y Axis
                          svg4.append("g").attr("class","y_tick")
                              .call(d3.axisLeft(y).tickFormat(d => d+"%" ));
                        svg4.append("text")      // text label for the y axis
                                .attr("x", -150)
                                .attr("y",  -50 )
                                .style("text-anchor", "middle")
                                .style("font-size", "12px")
                                // .style("font-family","verdana")
                                .attr("transform", "rotate(-90)")
                                .text("Volatility (%)");
                        
                        // });
                        var colors = [ "#FC7599","#999EFF","orange"];
                  
                        var data = ['Ann.downside Vol (T12M)','Ann.upside Vol (T12M)','Ann.Vol (T12M)'];

                          var svg_4 = d3.select('#divline2')
                          .append('svg')
                          .attr("viewBox", [0, 0, width+220, height-250])  
                          
                          var groups = svg_4.selectAll('g')
                          .data(data)
                          .enter()
                          .append('g');
                          

                          var line=groups.append("line").attr("x1",130).attr("x2",143).attr("y1",5).attr("class","legend")
                          .attr("y2",5).attr('stroke',function(d,i) { return colors[i];})

                          var text = groups.append('text')
                          .attr('y', 10)
                          .attr('x',150).style("font-size","14px")
                          .text(function(d) { return d; });
                          
                          // Now space the groups out after they have been appended:
                          var padding = 40;
                          groups.attr('transform', function(d,i) { 
                          return "translate("+(d3.sum(data, function(e,j) {
                              if (j < i) { return groups.nodes()[j].getBBox().width; } else return 0; }) + padding * i) + ",0)";
                          })
                        
                        </script>
                    </div>
                </div>


                <div class="tm-col tm-col-big">
                    <div class="bg-white tm-block h-100">
                        <h2 class="tm-block-title">Frequency Distribution - Since Inception</h2>
                        <div id="c22"></div>
                        <script src="//d3js.org/d3.v4.min.js"></script>
                        <script>
                        
                        // set the dimensions and margins of the graph
                        var margin = {top: 20, right: 0, bottom: 80, left: 80},
                                        width = 550 ,
                                        height = 380 ;
                        
                        // set the ranges
                        var x = d3.scaleBand()
                                  .range([0, width])
                                  .padding(0.1);
                        var y = d3.scaleLinear()
                                  .range([height, 0]);
                                  
                        // append the svg object to the body of the page
                        // append a 'group' element to 'svg'
                        // moves the 'group' element to the top left margin
                        var svg1 = d3.select("#c22")
                                      .append("svg")
                                      .attr("viewBox", [0, 0, width+150, height+100])
                                      .append("g")
                                      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
                        
                        var tooltip = d3.select("#c22").append("div").attr("class", "toolTip");
                        // get the data
                        d3.csv("../static/csv/frequency_dist_inception.csv", function(error, data) {
                          if (error) throw error;
                        
                          // format the data
                          data.forEach(function(d) {
                            d.Frequency = +d.Frequency;
                          });
                        
                          // Scale the range of the data in the domains
                          x.domain(data.map(function(d) { return d.Inspection; }));
                          y.domain([0, d3.max(data, function(d) { return d.Frequency; })]);
                        
                          // append the rectangles for the bar chart
                          svg1.selectAll(".bar")
                              .data(data)
                            .enter().append("rect")
                              .attr("class", "bar")
                              .attr("x", function(d) { return x(d.Inspection); })
                              .attr("width", x.bandwidth())
                              .attr("y", function(d) { return y(d.Frequency); })
                              .attr("height", function(d) { return height - y(d.Frequency); })
                              .on("mouseover", function(d){
                                      tooltip
                                        .style("left", d3.event.pageX - 50 + "px")
                                        .style("top", d3.event.pageY - 100 + "px")
                                        .style("display", "inline-block")
                                        .html("Inspection: "+(d.Inspection) + "<br>Frequency"+ (d.Frequency));
                                  })
                                  .on("mouseout", function(d){ tooltip.style("display", "none");});;
                        
                          // add the x Axis
                          svg1.append("g")
                              .attr("transform", "translate(0," + height + ")")
                              .call(d3.axisBottom(x).tickSizeOuter(0)).selectAll("text")
                                .attr("transform", "translate(-10,0)rotate(-45)")
                                .style("text-anchor", "end");
                        
                                    //adding x-axis label
                                    svg1.append("text")             
                                        .attr("transform","translate(" + (width/2) + " ," + (height+80) + ")")
                                        .style("text-anchor", "middle")
                                        .style("font-size","13")
                                        .text("Return Buckets");
                        
                          // add the y Axis
                          svg1.append("g")
                              .call(d3.axisLeft(y));
                        
                              
                          //adding label to y-axis
                          svg1.append("text")      // text label for the x axis
                              .attr("x",-200 )
                              .attr("y",-50)
                              .style("text-anchor", "middle")
                              .style("font-size", "13px")
                              .text("Number of Months").attr("transform", "rotate(-90)");



                              svg1.selectAll("text.bar")  		
                                .data(data)
                                .enter()
                                .append("text")
                                .attr("class","label")
                                .attr("text-anchor", "start")
                                .attr("x", (function(d) { return x(d.Inspection)+18; }  ))
                                .attr("y", function(d) { return y(d.Frequency)-17; })
                                .attr("dy", ".75em")
                                .text(function(d) { return d.Frequency; }); 
                          // svg1.selectAll("text.bar")
                          //       .data(data)
                          //     .enter().append("text")
                          //       .attr("class", "bar")
                          //       .attr("text-anchor", "middle")
                          //       .attr("x", function(d) { return x(d.Category)+x.bandwidth()/8 })
                          //       .attr("y", function(d) { return y(d.Frequency)-5; })
                          //       .text(function(d) { return d.Frequency; });
                                                  
                            
                        
                        });
                        
                        </script>
                    </div>
                </div>
         
            </div>

          </div>
    </div>
<!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
 
</body>
</html>
   <!-- ALL JS FILES -->
   <script src="{% static 'static/js/all.js' %}"></script>
   <!-- ALL PLUGINS -->
   <script src="{% static 'static/js/custom.js' %}"></script>